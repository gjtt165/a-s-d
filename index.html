<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bitahub · 字典管理原型（可编辑字典项）</title>
<style>
  :root{
    --primary:#0066ff;--bg:#f5f7fa;--card:#fff;--muted:#666;--border:#e9edf2;
    --radius:8px;--shadow:0 1px 4px rgba(0,0,0,.08);
    --green:#22c55e;--yellow:#f59e0b;--blue:#3b82f6;--red:#ef4444;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);font:14px/1.6,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial}
  .header{background:var(--primary);color:#fff;padding:12px 20px;font-size:18px}
  .layout{display:flex;min-height:100dvh}
  .sidebar{width:240px;background:#f8f9fb;border-right:1px solid var(--border);padding:14px}
  .side-title{color:#999;font-size:12px;margin:6px 10px}
  .menu a{display:flex;gap:8px;align-items:center;color:#334;text-decoration:none;padding:9px 12px;border-radius:6px;margin:4px 0}
  .menu a.active{background:#e6f0ff;color:var(--primary);font-weight:600}
  .menu .dot{width:8px;height:8px;border-radius:50%;background:var(--primary)}
  .main{flex:1;padding:18px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;position:relative}
  .card-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:12px}
  .hint{color:#8a8f98;font-size:12px}
  .btn{border:0;border-radius:6px;background:var(--primary);color:#fff;padding:8px 14px;cursor:pointer;display:inline-flex;align-items:center;gap:8px}
  .btn:hover{filter:brightness(.96)}
  .btn.gray{background:#eef2f6;color:#223}
  .btn .icon-plus svg path{fill:#fff;stroke:#fff}
  .btn .icon-left svg path{stroke:#222}
  .meta-form{display:grid;grid-template-columns:160px 1fr;gap:10px 12px}
  .meta-form label{color:#555;align-self:center}
  .meta-form .row{display:contents}
  .input{border:1px solid var(--border);border-radius:6px;padding:6px 10px;min-width:120px;background:#fff}
  table{width:100%;border-collapse:collapse;margin-top:8px}
  th,td{border-bottom:1px solid var(--border);padding:10px;text-align:left}
  th{background:#fafbfc}
  .link{color:var(--primary);cursor:pointer}
  .page{display:none}
  .page.active{display:block}
</style>
</head>
<body>
  <div class="header">云端资源管理系统 · 字典管理原型</div>

  <div class="layout">
    <aside class="sidebar">
      <div class="side-title">导航</div>
      <nav class="menu">
        <a><span class="dot"></span>业务系统管理</a>
        <a><span class="dot"></span>任务管理</a>
        <a class="active"><span class="dot"></span>字典管理</a>
        <a><span class="dot"></span>API配置</a>
      </nav>
    </aside>

    <main class="main">
      <section id="page-item" class="page active">

        <!-- 基本信息模块 -->
        <div class="card" style="margin-bottom:12px">
          <div class="card-head">
            <div style="display:flex;align-items:center;gap:10px">
              <button class="btn gray" id="btn-back">
                <span class="icon-left"><svg viewBox="0 0 16 16" width="16" height="16"><path d="M9.5 3L4.5 8l5 5" fill="none" stroke="#222" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
                返回
              </button>
              <span class="hint">可编辑字典元信息，保存后同步到列表与标题</span>
            </div>
            <div>
              <button class="btn" id="btn-save-dict">
                <svg viewBox="0 0 16 16" width="16" height="16" style="margin-right:6px">
                  <path d="M3 8l3 3 7-7" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
                </svg>保存
              </button>
            </div>
          </div>

          <div class="meta-form">
            <div class="row"><label for="edit-code">字典编码</label><input id="edit-code" class="input" value="annotation_type"></div>
            <div class="row"><label for="edit-name">名称</label><input id="edit-name" class="input" value="标注类型"></div>
            <div class="row"><label for="edit-desc">描述</label><input id="edit-desc" class="input" value="用于标注功能的类型配置"></div>
          </div>
        </div>

        <!-- 字典项模块 -->
        <div class="card">
          <div class="card-head">
            <h3 id="dict-title" style="margin:0">字典项管理 · 标注类型（annotation_type）</h3>
            <button class="btn" id="btn-add-item">
              <span class="icon-plus"><svg viewBox="0 0 16 16" width="16" height="16"><path d="M8 3v10M3 8h10" stroke="#fff" stroke-width="2" stroke-linecap="round" fill="#fff"/></svg></span>
              新增字典项
            </button>
          </div>

          <table id="dict-item-table">
            <thead><tr><th>排序</th><th>Label</th><th>Value</th><th>备注</th><th>操作</th></tr></thead>
            <tbody id="dict-item-body">
              <tr>
                <td>1</td>
                <td><input class="input" value="文字"></td>
                <td><input class="input" value="text"></td>
                <td><input class="input" value="默认类型"></td>
                <td><span class="link" onclick="deleteRow(this)">删除</span></td>
              </tr>
              <tr>
                <td>2</td>
                <td><input class="input" value="图片"></td>
                <td><input class="input" value="image"></td>
                <td><input class="input" value="2024新增"></td>
                <td><span class="link" onclick="deleteRow(this)">删除</span></td>
              </tr>
              <tr>
                <td>3</td>
                <td><input class="input" value="音频"></td>
                <td><input class="input" value="audio"></td>
                <td><input class="input" value="运维新增"></td>
                <td><span class="link" onclick="deleteRow(this)">删除</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>
  </div>

<script>
// 删除一行
function deleteRow(el){
  el.closest('tr').remove();
  updateRowNumbers();
}

// 新增一行
document.getElementById('btn-add-item').onclick = function(){
  const tbody = document.getElementById('dict-item-body');
  const row = document.createElement('tr');
  row.innerHTML = `
    <td></td>
    <td><input class="input" placeholder="请输入Label"></td>
    <td><input class="input" placeholder="请输入Value"></td>
    <td><input class="input" placeholder="备注"></td>
    <td><span class="link" onclick="deleteRow(this)">删除</span></td>
  `;
  tbody.appendChild(row);
  updateRowNumbers();
};

// 自动更新排序号
function updateRowNumbers(){
  document.querySelectorAll('#dict-item-body tr').forEach((tr,i)=>{
    tr.children[0].textContent = i+1;
  });
}

// 保存
document.getElementById('btn-save-dict').onclick = function(){
  const dictInfo = {
    code: document.getElementById('edit-code').value,
    name: document.getElementById('edit-name').value,
    desc: document.getElementById('edit-desc').value,
    items: []
  };
  document.querySelectorAll('#dict-item-body tr').forEach(tr=>{
    const inputs = tr.querySelectorAll('input');
    dictInfo.items.push({
      label: inputs[0].value,
      value: inputs[1].value,
      remark: inputs[2].value
    });
  });
  console.log("保存数据：", dictInfo);
  alert("保存成功！（控制台查看JSON）");
}
</script>
</body>
</html>

